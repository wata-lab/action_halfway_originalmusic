@namespace
class SpriteKind:
    Box = SpriteKind.create()

def on_right_pressed():
    animation.run_image_animation(mySprite, assets.animation("""
        myAnim
    """), 200, True)
controller.right.on_event(ControllerButtonEvent.PRESSED, on_right_pressed)

def CreatePlayer(x: number, y: number):
    global mySprite
    mySprite = sprites.create(assets.image("""
        myImage
    """), SpriteKind.player)
    mySprite.ay = 500
    tiles.place_on_tile(mySprite, tiles.get_tile_location(x, y))
    scene.camera_follow_sprite(mySprite)
    controller.move_sprite(mySprite, 100, 0)
def CreateBox(x: number, y: number):
    global box
    box = sprites.create(img("""
            e e e e e e e e e e e e e e e e 
                    e d d d d d d d d d d d d d d e 
                    e d d d d d d d d d d d d d d e 
                    e e e e e e e e e e e e e e e e 
                    e d d e d d d d d d e d e d d e 
                    e d d e d d d d d e d e e d d e 
                    e d d e d d d d e d e d e d d e 
                    e d d e d d d e d e d d e d d e 
                    e d d e d d e d e d d d e d d e 
                    e d d e d e d e d d d d e d d e 
                    e d d e e d e d d d d d e d d e 
                    e d d e d e d d d d d d e d d e 
                    e e e e e e e e e e e e e e e e 
                    e d d d d d d d d d d d d d d e 
                    e d d d d d d d d d d d d d d e 
                    e e e e e e e e e e e e e e e e
        """),
        SpriteKind.Box)
    tiles.place_on_tile(box, tiles.get_tile_location(x, y))
    box.fx = 200
def MoveEnemy(index: number):
    global move, counter
    if counter > 50:
        move = -0.5
        EnemySprite[index].set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . f f f . . . . . . . f 
                        . . . f f d d d f f . . . . f . 
                        . . f d d d d d d d f . . . f . 
                        . . f d f d d d d d f . . f . . 
                        . f d d d d d d d d d f f f . . 
                        . f f f f f f f f f f f . . . .
        """))
    if counter < -50:
        move = 0.5
        EnemySprite[index].set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        f . . . . . . . f f f . . . . . 
                        . f . . . . f f d d d f f . . . 
                        . f . . . f d d d d d d d f . . 
                        . . f . . f d d d d d f d f . . 
                        . . f f f d d d d d d d d d f . 
                        . . . . f f f f f f f f f f f .
        """))
    counter += move
    EnemySprite[index].x = EnemyPosition[index] + counter

def on_overlap_tile(sprite, location):
    tiles.set_tile_at(location, assets.tile("""
        myTile6
    """))
    Finish()
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        myTile7
    """),
    on_overlap_tile)

def on_overlap_tile2(sprite, location):
    global playerPositionx, playerPositiony
    tiles.set_tile_at(location, assets.tile("""
        transparency16
    """))
    effects.confetti.start_screen_effect(500)
    playerPositionx = 36
    playerPositiony = 12
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        myTile9
    """),
    on_overlap_tile2)

def on_overlap_tile3(sprite, location):
    tiles.set_tile_at(location, assets.tile("""
        transparency16
    """))
    music.ba_ding.play()
    info.change_score_by(1)
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        myTile3
    """),
    on_overlap_tile3)

def on_right_released():
    animation.stop_animation(animation.AnimationTypes.ALL, mySprite)
controller.right.on_event(ControllerButtonEvent.RELEASED, on_right_released)

def CreateScaffold():
    global _is, js
    _is = 80
    js = 85
    for index in range(7):
        tiles.set_tile_at(tiles.get_tile_location(_is, 13),
            assets.tile("""
                myTile1
            """))
        tiles.set_wall_at(tiles.get_tile_location(_is, 13), True)
        _is += 1
def Finish():
    game.over(True, effects.confetti)

def on_left_pressed():
    animation.run_image_animation(mySprite, assets.animation("""
        myAnim0
    """), 200, True)
controller.left.on_event(ControllerButtonEvent.PRESSED, on_left_pressed)

def on_b_repeated():
    controller.move_sprite(mySprite, 200, 0)
controller.B.on_event(ControllerButtonEvent.REPEATED, on_b_repeated)

def on_left_released():
    animation.stop_animation(animation.AnimationTypes.ALL, mySprite)
controller.left.on_event(ControllerButtonEvent.RELEASED, on_left_released)

def on_life_zero():
    info.set_score(0)
    game.over(False, effects.melt)
info.on_life_zero(on_life_zero)

def on_b_released():
    controller.move_sprite(mySprite, 100, 0)
controller.B.on_event(ControllerButtonEvent.RELEASED, on_b_released)

def CreateBridge():
    global i
    i = 40
    for index2 in range(5):
        tiles.set_tile_at(tiles.get_tile_location(i, 13),
            assets.tile("""
                myTile1
            """))
        tiles.set_wall_at(tiles.get_tile_location(i, 13), True)
        i += 3
def ChangeScaffold():
    global _is, js
    if time == 1000:
        if _is > 87:
            _is = 80
        if js > 87:
            js = 80
        tiles.set_tile_at(tiles.get_tile_location(_is, 13),
            assets.tile("""
                myTile1
            """))
        tiles.set_wall_at(tiles.get_tile_location(_is, 13), True)
        tiles.set_tile_at(tiles.get_tile_location(js, 13),
            assets.tile("""
                transparency16
            """))
        tiles.set_wall_at(tiles.get_tile_location(js, 13), False)
        _is += 1
        js += 1

def on_on_overlap(sprite, otherSprite):
    if mySprite.is_hitting_tile(CollisionDirection.RIGHT):
        tiles.set_wall_at(tiles.get_tile_location(88, 12), True)
    box.vx = 100
sprites.on_overlap(SpriteKind.player, SpriteKind.Box, on_on_overlap)

def CreateEnemy(x: number, y: number):
    global leftRightEnemy, move
    leftRightEnemy = sprites.create(img("""
            . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f . . . . . . . f 
                    . . . f f d d d f f . . . . f . 
                    . . f d d d d d d d f . . . f . 
                    . . f d f d d d d d f . . f . . 
                    . f d d d d d d d d d f f f . . 
                    . f f f f f f f f f f f . . . .
        """),
        SpriteKind.enemy)
    tiles.place_on_tile(leftRightEnemy, tiles.get_tile_location(x, y))
    EnemySprite.append(leftRightEnemy)
    EnemyPosition.append(leftRightEnemy.x)
    move = -0.5
def Damage():
    mySprite.set_velocity(0, 0)
    mySprite.ay = 0
    mySprite.destroy(effects.spray, 500)
    music.jump_down.play()
    pause(1000)
    CreatePlayer(playerPositionx, playerPositiony)
    info.change_life_by(-1)

def on_on_overlap2(sprite, otherSprite):
    Damage()
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_on_overlap2)

def on_a_pressed():
    if mySprite.tile_kind_at(TileDirection.BOTTOM, assets.tile("""
        myTile1
    """)):
        mySprite.vy = -200
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

leftRightEnemy: Sprite = None
i = 0
js = 0
_is = 0
move = 0
counter = 0
box: Sprite = None
mySprite: Sprite = None
time = 0
EnemyPosition: List[number] = []
EnemySprite: List[Sprite] = []
playerPositiony = 0
playerPositionx = 0
scene.set_background_color(9)
scene.set_background_image(img("""
    ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        .......................................................................................................................................1111.....................
        ......................................................................................................................................1111111...................
        .....................................................................................................................................1111111111.................
        ..............................................................................................................................11111111111111111.................
        ............................................................................................................................11111111111111111111111111..........
        ...........................................................................................................................11111111111111111111111111111........
        .......................................................................................................................111.111111111911111111111111111111111....
        ....................................................................................................................111111111111199991111111199111111111111111..
        ...................................................................................................................11111111111199999999111199999111111111111111.
        ...................................................................................................................111111199999999999999999999999111191111111199
        ....................................................................................................................11999999999666.99999999999999911999991119996
        .....................................................................................................................6669996666....99999999999999999999699996666
        .......................................................................................................................6666.........69999999999.969999669.......
        ....................................................................................................................................66999999999..6669...........
        .....................................................................................................................................66666666...................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...................................................1111.........................................................................................................
        ..................................................1111111.......................................................................................................
        .................................................1111111111.....................................................................................................
        ..........................................11111111111111111.....................................................................................................
        ........................................11111111111111111111111111..............................................................................................
        .......................................11111111111111111111111111111............................................................................................
        ...................................111.111111111911111111111111111111111........................................................................................
        ................................111111111111199991111111199111111111111111......................................................................................
        ...............................11111111111199999999111199999111111111111111.....................................................................................
        ...............................111111199999999999999999999999111191111111199....................................................................................
        ................................11999999999666.99999999999999911999991119996....................................................................................
        .................................6669996666....99999999999999999999699996666....................................................................................
        ...................................6666.........69999999999.969999669...........................................................................................
        ................................................66999999999..6669...............................................................................................
        .................................................66666666.......................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ............................................................................................66666666666666666666666.............................................
        ...................................................66666................................6666777777777777777777777776666.........................................
        ......................................6666666666666777776666666666...................66667777777777777777777777777777776666.....................................
        6666............................666666777777777777777777777777777766666............66677777777777777777777777777777777777776666......................66666666666
        777766666.................66666677777777777777777777777777777777777777766666.....66777777777777777777777777777777777777777777776666.............6666677777777777
        777777776666...........66677777777777777777777777777777777777777777777777777666666777777777777777777777777777777777777777777777777766.........666777777777777777
        76777677777766.....6666777677777776777777767777777677777776777777767777777677777667777776777777767777777677777776777777767777777677766.....666777677777776777777
        7777777777777666666777777777777777777777777777777777777777777777777777777777777777667777777777777777777777777777777777777777777777777766.66677777777777777777777
        7677767776777766776777677767776777677767776777677767776777677767776777677767776777676677677767776777677767776777677767776777677767776777667776777677767776777677
        6767676767676676767676767676767676767676767676767676767676767676767676767676767676767666767676767676767676767676767676767676767676767676766767676767676767676767
        7676767676767767676767676767676767676767676767676767676767676767676767676767676767676766676767676767676767676767676767676767676767676767677666767676767676767676
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777775577777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777
        7777777777777555777777777777777777777777777777777777777775577777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777
        7777777777777555577777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777555577777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775577777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775577777777777777777777777777773337777777777777777777
        7777777777777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777773337777777777777777777
        7777777777777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777773337777777777777777777
        7777777777777777777777777777777777777777333777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
        6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
        7676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
        6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
"""))
scroller.set_camera_scrolling_multipliers(0.3, 0)
tiles.set_tilemap(tilemap("""
    レベル1
"""))
playerPositionx = 0
playerPositiony = 12
CreatePlayer(playerPositionx, playerPositiony)
EnemySprite = []
EnemyPosition = []
CreateEnemy(60, 12)
CreateEnemy(65, 12)
CreateScaffold()
time = 0
info.set_life(3)
info.set_score(0)

def on_forever():
    global time
    if mySprite.y >= 250:
        scene.center_camera_at(mySprite.x, 250)
        Damage()
    if mySprite.tile_kind_at(TileDirection.BOTTOM, assets.tile("""
        myTile
    """)):
        mySprite.vy = -350
    if mySprite.tile_kind_at(TileDirection.BOTTOM, assets.tile("""
        myTile0
    """)):
        Damage()
    if mySprite.tile_kind_at(TileDirection.BOTTOM, assets.tile("""
        myTile4
    """)):
        tiles.set_tile_at(tiles.get_tile_location(38, 12),
            assets.tile("""
                myTile5
            """))
        CreateBridge()
    カウンター = 0
    while カウンター <= len(EnemyPosition) - 1:
        MoveEnemy(カウンター)
        カウンター += 1
    time += 1
    if time > 1000:
        time = 0
forever(on_forever)
